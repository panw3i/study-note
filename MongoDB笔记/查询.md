查询参数笔记运算

### 查询运算符

MongoDB中常见的一些运算符：

1. 大于(`$gt`)、
2. 大于等于(`$gte`)、
3. 小于(`$lt`)、
4. 小于等于(`$lte`)、
5. 不等于(`$ne`)、
6. 包含于(`$in`)、
7. 不包含于(`$nin`)

比如下面的查询
```js
// 查询person中年龄小于30的数据
db.person.find({age: { $lt: 30 }});
```

### 数组条件

```js
// 查询person对象中，属性`tags`包含'fruit', 'food', 'citrus'之一的数据
db.person.find( { tags: [ 'fruit', 'food', 'citrus' ] } );
```

### 嵌套查询

```js
// 查询子匹配子对象属性值的数据
// 数据: {id:1,name:'test',contact:{email:12@qq.com,phone:1212}}
db.person.find({'contact.email':'12@qq.com'});
```

### 并且查询

```js
// 查询person集合中年龄(age)大于30岁，并且名字(name)为"Lucy"的数据。
db.person.find({$and:[{age:{$gt:30}}, {name:'Lucy'}]});
```

### 或者查询

```js
// 在person集合中查一下，状态(status)为"A"或年龄(age)为30的数据。
db.person.find({$or: [{status:'A'}, {age:30}]});
```

## cursor游标

> 定义：find命令并不直接返回结果，而是返回一个结果集的迭代器，即游标。

```js
//想要获取数据，我们可以使用next方法来遍历游标，如下：
var myCursor = db.inventory.find( { type: "food" } );
var myDocument = myCursor.hasNext() ? myCursor.next() : null;

if (myDocument) {
    var myItem = myDocument.item;
    print(tojson(myItem));
}

//使用forEach方法也能实现游标的遍历
var myCursor =  db.inventory.find( { type: "food" } );
myCursor.forEach(printjson);
```

## 限定查询返回的记录数

`limit`方法：设定返回结果集中的最大文档数量。
```js
// 只返回3条数据
db.person.find().limit(3)
```
